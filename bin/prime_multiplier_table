#!/usr/bin/env ruby
require 'optparse'
require "#{File.dirname(__dir__)}/lib/prime_multiplier"

options = {}

option_parser = OptionParser.new do |opts|
  opts.banner = 'Usage: prime_multiplier [options]'

  options[:num_primes] = 10
  opts.on('-c', '--count NUMBER', 'Number of primes to output') do |num_primes|
    options[:num_primes] = num_primes.to_i if num_primes.to_i > 0
  end

  opts.on('-h', '--help', 'Display this screen') do
    puts opts
    exit
  end
end

option_parser.parse!

primes = PrimeMultiplier::NumberGenerator.new.call(options[:num_primes])
multiplied_primes = PrimeMultiplier::Multiply.new.call(primes, options[:num_primes])

PrimeMultiplier::Table.new(primes: primes, multiplied_primes: multiplied_primes).call
